<!DOCTYPE html>
<html>

	<head>
		<title>
			Job Searcher
		</title>

		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

		<link href="assets/styles.css" rel="stylesheet">

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	</head>

<body>
<p id="demo">Getting your location... </p>
<div id="mapholder"></div>

<script src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script>
getLocation();
var x = document.getElementById("demo");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition,showError);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";}
}

function showPosition(position) {

    lat = position.coords.latitude;
    lon = position.coords.longitude;
    document.getElementById('lat').value = lat;
    document.getElementById('lon').value = lon;

    latlon = new google.maps.LatLng(lat, lon)
    mapholder = document.getElementById('mapholder')
    mapholder.style.height='250px';
    mapholder.style.width='500px';

    var myOptions={
    center:latlon,zoom:14,
    mapTypeId:google.maps.MapTypeId.ROADMAP,
    mapTypeControl:false,
    navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
    }

    var map = new google.maps.Map(document.getElementById("mapholder"),myOptions);
    var marker = new google.maps.Marker({position:latlon,map:map,title:"You are here!"});


}

function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation."
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable."
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out."
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred."
            break;
    }

}
</script>


	<div class="container">

		<div class="row">
			<h1>Job Search Dashboard</h1>
		</div>

		<div class="row">

			<form class="form-group" action="/search" method="post">

				<label for="job">Job:</label>

				<input type="text" class="form-control" name="job" placeholder="job">

				<label for="location">Location:</label>

				<input type="text" class="form-control" name="location" placeholder="location">

			  <input type='hidden' id="lat" name='lat' value='' />
			  <input type='hidden' id="lon" name='lon' value='' />

		    <button type="submit" class="btn btn-default btn-lg">Search</button>

		  </form>

		</div>


		<div class="row">



		    <% if !@csv.nil? %>

					<div class="col-sm-4">
						Company
					</div>
					<div class="col-sm-8">
						Job Description
					</div>

			    <% @csv.each do |x| %>

		    	<div class="col-sm-4">
			    	<p><%= x.company %></p>
			    </div>

			    <div class="col-sm-8">
		  	  	<p><%= x.title   %></p>
		  	  </div>
		   	  <% end %>

		   	<% end %>

		</div>




		</div> <!--container-->


















